#!/usr/bin/env bash
# Add your config vars and passwords

export PATH="${PATH}":~/bin
export PGPASSWORD=""
export EDITOR="vim"
source ${HOME}/.dotfiles/psql/colors.sh

alias diff="diff --color=always"
alias grep="grep --color=always"
export LESS='-R --use-color -Dd+r$Du+b'
alias wcalc="wcalc --color"
alias man="PAGER=less man"

git_branch() {
  if ! git rev-parse --git-dir >/dev/null 2>&1; then
    return
  fi

  local branch=$(git branch --show-current 2>/dev/null)
  local status=""

  if [[ -n $(git status --porcelain 2>/dev/null) ]]; then
    status="${status} *"
  fi

  # Verifica se há commits locais não pushados
  local unpushed=$(git log @{u}.. 2>/dev/null | wc -l)
  if [[ $unpushed -gt 0 ]]; then
    status="${status} ↑"
  fi

  # Verifica se há commits remotos não puxados
  local unpulled=$(git log ..@{u} 2>/dev/null | wc -l)
  if [[ $unpulled -gt 0 ]]; then
    status="${status} ↓"
  fi

  echo "[${branch}${status}]"
}
